import{_ as ae,j as ne,a as t,l as re,t as ce,m as ie,n as ue,q as de,b as x,o as n,d,e,g as v,s as j,v as D,x as g,y as r,u as f,w as z,z as q,F as V,A as O,h as H,B as ve,p as pe,i as ge}from"./index-xrALW0IQ.js";import{c as fe,A as _e}from"./appLogo-N81tkM7k.js";const _=y=>(pe("data-v-b82e4187"),y=y(),ge(),y),me={class:"customers"},he={class:"flex justify-content-start font-bold border-round"},we={class:"flex justify-content-start font-bold border-round",style:{"margin-bottom":"1em"}},xe={class:"flex justify-content-between flex-wrap",style:{"background-color":"gray",padding:"1em","border-radius":"0.5em"}},ye={class:"flex justify-content-start"},be={class:"ml-1 p-input-icon-left"},Ce=_(()=>e("i",{class:"pi pi-search",style:{color:"blue"}},null,-1)),ke={class:"flex justify-content-end"},Le=_(()=>e("i",{class:"pi pi-bars",style:{color:"white"}},null,-1)),Se=_(()=>e("i",{class:"pi pi-th-large",style:{color:"white"}},null,-1)),je={key:0,class:"block bg-primary font-bold text-center p-4 border-round mb-3",style:{"margin-top":"10%"}},Ie={class:"showLoad"},Be={class:"list"},De={class:"flex flex-column sm:flex-row justify-content-between align-items-center xl:align-items-start flex-1 gap-4"},Ve={class:"flex flex-column align-items-center sm:align-items-start gap-3"},Ne=["src"],Pe={class:"text-2xl font-bold text-900"},Te={class:"font-semibold"},Ee={class:"font-semibold"},Me=_(()=>e("div",{class:"flex align-items-center gap-3"},[e("span",{class:"flex align-items-center gap-2"},[e("i",{class:"pi pi-tag"})])],-1)),Fe={class:"flex sm:flex-column align-items-center sm:align-items-end gap-3 sm:gap-2"},Ge={class:"text-2xl font-semibold"},$e={class:"grid"},Ae={class:"grid grid-nogutter"},Ue={key:0,class:"p-4 border-1 surface-border surface-card border-round"},ze=_(()=>e("div",{class:"flex flex-wrap align-items-center justify-content-between gap-2"},null,-1)),qe={class:"flex flex-column align-items-center gap-3 py-5"},Oe=["src"],He={class:"text-2xl font-bold"},Je={class:"font-semibold"},Ke={class:"flex align-items-center gap-2"},Qe={class:"text-2xl font-semibold"},Re={class:"flex align-items-center justify-content-between"},We={class:"font-semibold"},Xe=_(()=>e("span",null,[e("i",{class:"pi pi-tag"})],-1)),Ye={class:"flex sm:flex-column align-items-center sm:align-items-start gap-3 sm:gap-2"},Ze={class:"flex sm:flex-column align-items-center sm:align-items-end gap-3 sm:gap-2"},es={__name:"customersPage",setup(y){const i=ne(),p=t(),u=t(!0),J=t(!0),b=t(!1),l=t(""),m=t();let N=t(0),P=t(null);const h=t(!1),K=t("Darle click a las tres barras para ver los datos filtrados"),Q=t([{text:"Entregado",value:"Entregado"},{text:"No entregado",value:"No entregado"}]),w=t(),R=t(!0),T=t();let E=t(!0),M=t(!1);const W=t("Loading..."),I=t(!0),B=t(!1),X=t("No hay datos disponibles");re(()=>{Y(),i.getIdentity()==!0?i.router.push({path:"/customersPage",name:"customersPage"}):i.router.push({path:"/loginPage",name:"loginPage"}),console.log("customers Page")});const Y=async()=>{try{const o=`${fe.login_Path}/all_customers`,a={};await i.getData(ce(o),a),w.value=await i.data.json();let c=Object.prototype.toString.call(w.value)==="[object String]";console.log("isString",c)}catch(o){T.value=o}finally{R.value=!1,!T.value!=null&&w.value!=null?I.value=!1:I.value=!0}},Z=()=>{b.value=!1,u.value=!0},ee=()=>{u.value=!1,b.value=!0,h.value=!1};window.onload=F(),window.onunload=F();function F(){clearInterval(P.value),N.value=0,P.value=setInterval(se,36e5)}function se(){N++,localStorage.clear("dataIdentity")}const te=(o,a)=>!o==""?(a.reduce(function(c,k){return k.status==o&&c.push(k),p.value=c,p.value==0?(B.value=!0,u.value=!0):p.value.length>0&&p.value.length<4?(u.value=!1,document.getElementById("btnGrid").disabled=!0,b.value==!0?h.value=!1:h.value=!0):(h.value=!1,B.value=!1,u.value=!0),p.value},[]),p.value):w.value;function oe(o){m.value=o}ie(()=>{console.log("before update")});let C=ue(()=>{const o=m.value,a=w.value;return te(o,a)});de(()=>C,()=>{C.length<4&&(u.value=!1,console.log(u.value))},{immediate:!0});const G=o=>{switch(o.status){case"Entregado":return"success";case"No entregado":return"danger";default:return null}};async function $(o,a){i.router.path!=`/client/${o}`&&(i.pathId=o,i.customerStatus=a,await i.router.push({path:"/client/:id",name:"customerDetails",params:{id:o}}).catch(c=>{c.name!=="NavigationDuplicated"&&!c.message.includes("Avoided redundant navigation to current location")&&console.error(c)}))}return(o,a)=>{const c=x("Dropdown"),k=x("InputText"),L=x("Button"),A=x("Message"),U=x("Tag");return n(),d(V,null,[e("header",null,[v(_e)]),e("section",me,[e("section",he,[e("section",we,[v(c,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=s=>m.value=s),options:Q.value,optionLabel:"text",placeholder:"Filtrar",onChange:a[1]||(a[1]=s=>oe(m.value.value))},null,8,["modelValue","options"])])]),e("section",xe,[e("section",ye,[e("span",be,[Ce,v(k,{type:"text",modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=s=>l.value=s),placeholder:"Buscar",style:{width:"8em",color:"blue"}},null,8,["modelValue"])])]),e("section",ke,[v(L,{onClick:ee},{default:j(()=>[Le]),_:1}),J.value?(n(),D(L,{key:0,onClick:Z,id:"btnGrid"},{default:j(()=>[Se]),_:1})):g("",!0)])]),I.value?(n(),d("div",je,[e("div",Ie,r(W.value),1)])):g("",!0),h.value?(n(),D(A,{key:1,severity:"error",sticky:f(E),life:6e3},{default:j(()=>[H(r(K.value),1)]),_:1},8,["sticky"])):g("",!0),B.value?(n(),D(A,{key:2,severity:"error",sticky:f(E),life:6e3},{default:j(()=>[H(r(X.value),1)]),_:1},8,["sticky"])):g("",!0),z(e("div",Be,[(n(!0),d(V,null,O(f(C),(s,S)=>(n(),d("div",{class:"col-12",key:S},[!l.value==""&&s.cliente.toLowerCase().includes(l.value.toLowerCase())||s.address.toLowerCase().includes(l.value.toLowerCase())||s.phone.toLowerCase().includes(l.value.toLowerCase())||s.dni.toLowerCase().includes(l.value.toLowerCase())||s.status.toLowerCase().includes(l.value.toLowerCase())?(n(),d("div",{key:0,class:ve(["flex flex-column xl:flex-row xl:align-items-start p-4 gap-4",{"border-top-1 surface-border":S!==0}])},[e("div",De,[e("div",Ve,[e("img",{class:"w-4 sm:w-5rem xl:w-2rem shadow-2 block xl:block mx-auto border-round",src:s.picture,alt:"image client"},null,8,Ne),e("div",Pe,r(s.cliente),1),e("span",Te,r(s.address),1),e("span",Ee,r(s.dni),1),Me]),e("div",Fe,[e("span",Ge,r(s.phone),1),v(U,{value:s.status,severity:G(s)},null,8,["value","severity"]),v(L,{icon:"pi pi-eye",label:"ver",loading:f(M),onClick:le=>$(s.id,s.status)},null,8,["loading","onClick"])])])],2)):g("",!0)]))),128))],512),[[q,b.value]]),z(e("div",$e,[e("div",Ae,[(n(!0),d(V,null,O(f(C),(s,S)=>(n(),d("div",{class:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2",key:S},[!l.value==""&&s.cliente.toLowerCase().includes(l.value.toLowerCase())||s.address.toLowerCase().includes(l.value.toLowerCase())||s.phone.toLowerCase().includes(l.value.toLowerCase())||s.dni.toLowerCase().includes(l.value.toLowerCase())||s.status.toLowerCase().includes(l.value.toLowerCase())?(n(),d("div",Ue,[ze,e("div",qe,[e("img",{class:"w-4 sm:w-5rem xl:w-2rem shadow-2 block xl:block mx-auto border-round",src:s.picture,alt:"image client"},null,8,Oe),e("div",He,r(s.cliente),1),e("span",Je,r(s.address),1),e("div",Ke,[e("span",Qe,r(s.phone),1)]),e("div",Re,[e("span",We,r(s.dni),1),Xe]),e("div",Ye,[v(U,{value:s.status,severity:G(s)},null,8,["value","severity"])]),e("div",Ze,[v(L,{icon:"pi pi-eye",label:"ver",loading:f(M),onClick:le=>$(s.id,s.status)},null,8,["loading","onClick"])])])])):g("",!0)]))),128))])],512),[[q,u.value]])])],64)}}},os=ae(es,[["__scopeId","data-v-b82e4187"]]);export{os as default};
