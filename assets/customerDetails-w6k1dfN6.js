import{_ as O,o as m,d as k,e,y as s,j as J,C as K,a as l,r as E,l as Q,D as W,E as X,t as T,q as P,b as h,g as i,x as w,h as a,v as $,s as F,u as U,w as Y,z as Z,G as ee,F as te,p as oe,i as se}from"./index-xrALW0IQ.js";import{c as M,A as ne}from"./appLogo-N81tkM7k.js";const ae={class:"info"},le={class:"green"},re={__name:"info",props:{msg:{type:String,required:!0}},setup(_){return(r,I)=>(m(),k("div",ae,[e("h4",le,s(_.msg),1)]))}},ce=O(re,[["__scopeId","data-v-ee44e2ee"]]),o=_=>(oe("data-v-07ad6f53"),_=_(),se(),_),de={class:"flex align-items-stretch flex-wrap"},ie={key:0,class:"block bg-primary font-bold text-center p-4 border-round",style:{height:"4em"}},ue={class:"container"},_e={class:"contain"},pe=o(()=>e("h1",null,"Datos cliente",-1)),he={class:"customer"},me=o(()=>e("h4",null,"Cliente:",-1)),fe=o(()=>e("h4",null,"DNI:",-1)),ve=o(()=>e("h4",null,"Direccion:",-1)),ge=o(()=>e("h4",null,"Telefono:",-1)),ye=o(()=>e("h4",null,"Estado pedido:",-1)),be={class:"contain"},xe=o(()=>e("h1",null,"Datos pedido",-1)),we={class:"customer"},ke=o(()=>e("h4",null,"Fecha de entrega:",-1)),Ie=o(()=>e("h4",null,"Numero de pedido:",-1)),je=o(()=>e("h4",null,"Hora limite:",-1)),De=o(()=>e("h4",null,"Franja Horaria:",-1)),Se={class:"contain"},Ve=o(()=>e("h1",null,"Bultos pedido",-1)),Ne={class:"order_drawers"},Be={class:"block_section"},Ce=o(()=>e("h2",null,"Cajones",-1)),Ee={class:"block_div flex flex-row flex-wrap justify-content-center align-items-center"},Te={class:"block"},Pe=o(()=>e("h4",{class:"flex flex-row flex-wrap justify-content-center align-items-center"},"Frio",-1)),$e={class:"span_block"},Fe={class:"block"},Ue=o(()=>e("h4",{class:"flex flex-row flex-wrap justify-content-center align-items-center"},"Congelado",-1)),Me={class:"span_block"},Oe={class:"block"},ze=o(()=>e("h4",{class:"flex flex-row flex-wrap justify-content-center align-items-center"},"Seco",-1)),Le={class:"span_block"},qe={class:"block"},Re=o(()=>e("h4",{class:"flex flex-row flex-wrap justify-content-center align-items-center"},"Fuera de cajon",-1)),Ae={class:"span_block"},Ge={class:"block_section"},He=o(()=>e("h2",null,"Bolsas",-1)),Je={class:"block_div flex flex-row flex-wrap justify-content-center align-items-center"},Ke={class:"block"},Qe=o(()=>e("h4",{class:"flex flex-row flex-wrap justify-content-center align-items-center"},"Frio",-1)),We={class:"span_block"},Xe={class:"block"},Ye=o(()=>e("h4",{class:"flex flex-row flex-wrap justify-content-center align-items-center"},"Congelado",-1)),Ze={class:"span_block"},et={class:"block_section"},tt=o(()=>e("h2",null,"Sustituciones",-1)),ot={class:"block_div flex flex-row flex-wrap justify-content-center align-items-center"},st={class:"block"},nt={class:"flex flex-row flex-wrap justify-content-center align-items-center"},at={class:"contain"},lt={class:"textarea_1"},rt={class:"p-float-label"},ct=o(()=>e("label",null,"Notas para reparto:",-1)),dt=o(()=>e("br",null,null,-1)),it={class:"contain"},ut={class:"return"},_t={class:"p-float-label"},pt=o(()=>e("label",null,"Devoluciones y motivo de devoluciones:",-1)),ht=o(()=>e("small",{id:"textarea-help"},"apunta aqui los productos devueltos y el o los motivo(s) de la devolucion",-1)),mt=o(()=>e("br",null,null,-1)),ft=o(()=>e("br",null,null,-1)),vt={class:"flex"},gt=o(()=>e("br",null,null,-1)),yt={class:"contain"},bt={class:"receptor"},xt={class:"card flex justify-content-center"},wt={class:"flex flex-column gap-2"},kt=o(()=>e("label",{for:"dni"},"DNI del receptor",-1)),It=o(()=>e("br",null,null,-1)),jt={class:"card flex justify-content-center"},Dt={class:"flex flex-column gap-2"},St=o(()=>e("label",{for:"username"},"Nombre del receptor",-1)),Vt=o(()=>e("br",null,null,-1)),Nt=o(()=>e("br",null,null,-1)),Bt={class:"btn-footer"},Ct={__name:"customerDetails",setup(_){const r=J(),I=K(),v=l(!1),t=E({dict:{},order_data:[],delivery_note:[],orders_packages:[],receptor_data:[],returned_product:[],drawers:[],bags:[],status:[]}),z=l("Loading..."),L=l(!0),g=l(!0),j=l(),f=l(!1),u=l("Guardar");let D=l(!0);const S=l(!1),q=l("Successfully updated"),R=l("Es importante comprobar los siguientes datos: si hay devoluciones especificar la cantidad y tanto el Dni y nombre del receptor no pueden estar vacios"),y=l(!1),b=E({color:"#eeeeee",fontSize:"1em",backgroundColor:""});Q(()=>{console.log("customer details page"),G();const c=document.getElementById("myTextarea").disabled=!0;if(r.customerStatus=="Entregado"){const n=document.getElementById("textarea").disabled=!0,p=document.getElementById("dni").disabled=!0,x=document.getElementById("username").disabled=!0;document.getElementById("btnOnclick").disabled=!0,u.value="Enviado",console.log(c,n,p,x)}});const V=W(()=>{if(!window.confirm("Dou you really want to leave, may check if you have some unsaved changes!"))return!1;console.log("leave or not ")}),A=X(()=>{r.getIdentity()&&V==!0?I.push({path:"/customersPage",name:"customersPage"}):r.router.push({path:"/loginPage",name:"loginPage"}),console.log("To customerPage or loginPage")}),G=async()=>{try{const c=`${M.login_Path}/one_customer/${r.pathId}`,n={};await r.getData(T(c),n),t.dict=await r.data.json();let p=Object.prototype.toString.call(t.dict)==="[object String]";console.log("isString",p),t.order_data=t.dict.order_data,t.delivery_note=t.dict.delivery_note,t.orders_packages=t.dict.orders_packages,t.receptor_data=t.dict.receptor_data,t.returned_product=t.dict.returned_product,t.drawers=t.dict.orders_packages.drawers,t.bags=t.dict.orders_packages.bags,t.status=t.dict.status}catch(c){j.value=c}finally{L.value=!1,!j.value!=null&&t.dict!=null?g.value=!1:g.value=!0}};P(()=>[t.receptor_data.DNI,t.receptor_data.name],()=>{t.receptor_data.DNI!=""&&t.receptor_data.name!=""?(console.log(!0),f.value=!0):f.value=!1}),P(()=>u.value,()=>{if(u.value=="Enviado"){const c=document.getElementById("btnOnclick").disabled=!0;console.log("disable btn",c),setTimeout(()=>{f.value=!1},3e3)}},{immediate:!0});const H=async()=>{if(console.log("clicked"),t.returned_product.return_reason!=""&&t.returned_product.unity!=""||t.returned_product.return_reason==""&&t.returned_product.unity==""&&t.receptor_data.name!=""&&t.receptor_data.DNI!=""){b.backgroundColor="#59c88b",u.value="Enviado",console.log(t.receptor_data.DNI,t.receptor_data.name,t.returned_product.return_reason,t.returned_product.unity);const c=`${M.login_Path}/customer_data/update/${r.pathId}`,n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.pathId,picture:t.dict.picture,cliente:t.dict.cliente,dni:t.dict.dni,address:t.dict.address,phone:t.dict.phone,status:"Entregado",delivery_note:t.dict.delivery_note,order_data:t.dict.order_data,orders_packages:t.dict.orders_packages,receptor_data:t.receptor_data,returned_product:t.returned_product})};return await r.getData(T(c),n),r.data.status==200?S.value=!0:y.value=!0,v.value=!0,setTimeout(()=>{v.value=!1},1e3),u.value}else y.value=!0,b.backgroundColor="red",u.value="No enviado"};return(c,n)=>{const p=h("Textarea"),x=h("InputNumber"),N=h("Button"),B=h("Message"),C=h("InputText");return m(),k(te,null,[e("header",null,[i(ne)]),e("div",de,[i(ce,{class:"flex align-items-center justify-content-center bg-primary px-3 py-1 font-bold border-round m-2",style:{width:"50%"},msg:"Comprobante de la entrega"})]),g.value?(m(),k("section",ie,s(z.value),1)):w("",!0),e("div",ue,[e("div",_e,[pe,e("div",he,[me,a(" "+s(t.dict.cliente)+" ",1),fe,a(" "+s(t.dict.dni)+" ",1),ve,a(" "+s(t.dict.address)+" ",1),ge,a(" "+s(t.dict.phone)+" ",1),ye,a(" "+s(t.dict.status),1)])]),e("div",be,[xe,e("div",we,[ke,a(" "+s(t.order_data.delivery_date)+" ",1),Ie,a(" "+s(t.order_data.order_number)+" ",1),je,a(" "+s(t.order_data.delivery_time)+" ",1),De,a(" "+s(t.order_data.delivery_time_interval),1)])]),e("div",Se,[Ve,e("div",Ne,[e("section",Be,[Ce,e("div",Ee,[e("div",Te,[Pe,e("span",$e,s(t.drawers.cold),1)]),e("div",Fe,[Ue,e("span",Me,s(t.drawers.frozen),1)]),e("div",Oe,[ze,e("span",Le,s(t.drawers.dry),1)]),e("div",qe,[Re,e("span",Ae,s(t.drawers.out_of_drawers),1)])])]),e("section",Ge,[He,e("div",Je,[e("div",Ke,[Qe,e("span",We,s(t.bags.cold),1)]),e("div",Xe,[Ye,e("span",Ze,s(t.bags.frozen),1)])])]),e("section",et,[tt,e("div",ot,[e("div",st,[e("h4",nt,s(t.orders_packages.substitutions),1)])])])])]),e("div",at,[e("div",lt,[e("span",rt,[i(p,{id:"myTextarea",modelValue:t.delivery_note.note,"onUpdate:modelValue":n[0]||(n[0]=d=>t.delivery_note.note=d),rows:"3",style:{"margin-top":"5px",width:"100%"}},null,8,["modelValue"]),ct])])]),dt,e("div",it,[e("div",ut,[e("span",_t,[i(p,{id:"textarea",modelValue:t.returned_product.return_reason,"onUpdate:modelValue":n[1]||(n[1]=d=>t.returned_product.return_reason=d),rows:"2",style:{"margin-top":"5px",width:"100%"}},null,8,["modelValue"]),pt,ht]),a(),mt,a(" unidad de producto devueltos"),ft,e("div",vt,[i(x,{modelValue:t.returned_product.unity,"onUpdate:modelValue":n[2]||(n[2]=d=>t.returned_product.unity=d),inputId:"integeronly",style:{width:"96%",height:"4em"}},null,8,["modelValue"]),i(N,{icon:"pi pi-plus","aria-label":"Submit",onClick:n[3]||(n[3]=d=>t.returned_product.unity++),style:{width:"5em",height:"4em"}})])])])]),gt,y.value?(m(),$(B,{key:1,severity:"error",sticky:U(D),life:6e3},{default:F(()=>[a(s(R.value),1)]),_:1},8,["sticky"])):w("",!0),S.value?(m(),$(B,{key:2,severity:"success",sticky:U(D),life:1e3},{default:F(()=>[a(s(q.value),1)]),_:1},8,["sticky"])):w("",!0),e("div",yt,[e("div",bt,[e("div",xt,[e("div",wt,[kt,i(C,{id:"dni",modelValue:t.receptor_data.DNI,"onUpdate:modelValue":n[4]||(n[4]=d=>t.receptor_data.DNI=d),"aria-describedby":"dni-help"},null,8,["modelValue"])])]),It,e("div",jt,[e("div",Dt,[St,i(C,{id:"username",modelValue:t.receptor_data.name,"onUpdate:modelValue":n[5]||(n[5]=d=>t.receptor_data.name=d),"aria-describedby":"username-help"},null,8,["modelValue"])])])])]),Vt,Nt,Y(e("footer",Bt,[i(N,{type:"button",id:"btnOnclick",label:u.value,severity:"help",icon:"pi pi-send",loading:v.value,style:ee(b),onClick:H,iconPos:"left"},null,8,["label","loading","style"])],512),[[Z,f.value]])],64)}}},Pt=O(Ct,[["__scopeId","data-v-07ad6f53"]]);export{Pt as default};
